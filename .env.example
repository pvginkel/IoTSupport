ESP32_CONFIGS_DIR=/data/esp32-configs
ASSETS_DIR=/data/assets
SIGNING_KEY_PATH=/data/signing_key.pem
CORS_ORIGINS=["http://localhost:3000"]
FLASK_ENV=development

# =============================================================================
# OIDC Authentication (disabled by default)
# =============================================================================
BASEURL=http://localhost:3200
OIDC_ENABLED=false
OIDC_ISSUER_URL=https://keycloak.example.com/realms/iot
OIDC_CLIENT_ID=iot-frontend
OIDC_CLIENT_SECRET=your-client-secret-here

# Optional OIDC settings (defaults shown)
# OIDC_SCOPES=openid profile email
# OIDC_AUDIENCE=                      # Defaults to OIDC_CLIENT_ID
# OIDC_ADMIN_ROLE=admin
# OIDC_ASSET_ROLE=asset-uploader
# OIDC_COOKIE_NAME=access_token
# OIDC_COOKIE_SECURE=                 # Inferred from BASEURL (https = true)
# OIDC_COOKIE_SAMESITE=Lax

# =============================================================================
# Keycloak Admin API (for device provisioning)
# =============================================================================
# Token endpoint for your realm
OIDC_TOKEN_URL=https://keycloak.example.com/realms/iot/protocol/openid-connect/token

# Keycloak base URL (admin API URL is derived: {base}/admin/realms/{realm})
KEYCLOAK_BASE_URL=https://keycloak.example.com

# Realm name where device clients will be created
KEYCLOAK_REALM=iot

# Service account client with manage-clients role from realm-management
KEYCLOAK_ADMIN_CLIENT_ID=iot-backend
KEYCLOAK_ADMIN_CLIENT_SECRET=your-admin-client-secret-here

# =============================================================================
# WiFi Credentials for Provisioning
# =============================================================================
WIFI_SSID=YourWiFiNetwork
WIFI_PASSWORD=YourWiFiPassword

# =============================================================================
# MQTT (for rotation notifications, optional)
# =============================================================================
# MQTT_URL=mqtt://localhost:1883
# MQTT_USERNAME=
# MQTT_PASSWORD=

# =============================================================================
# Rotation Settings
# =============================================================================
# CRON schedule for credential rotation (e.g., first Saturday of month at 8am)
ROTATION_CRON=0 8 1-7 * 6

# Timeout for device to complete rotation before rollback (default: 300 seconds)
# ROTATION_TIMEOUT_SECONDS=300

# Days after which a timed-out device is considered critical
ROTATION_CRITICAL_THRESHOLD_DAYS=7

# =============================================================================
# Secret Encryption (required for production)
# =============================================================================
# Fernet encryption key for cached secrets during rotation
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
# FERNET_KEY=your-32-byte-base64-encoded-fernet-key
